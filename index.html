<!doctype html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–û—Ç–∫—Ä—ã—Ç–∫–∞ üíò</title>

<style>
:root{
  --bg1:#ffdde9;
  --bg2:#fff6fb;
  --card:#ffffffcc;
  --text:#1f1f1f;
  --accent:#ff3b6b;
  --yes:#2dd4bf;
  --shadow: 0 22px 70px rgba(0,0,0,.16);
}

*{box-sizing:border-box;}

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family:system-ui, Arial;
  color: var(--text);
  background:
    radial-gradient(1200px 800px at 20% 15%, var(--bg2), transparent 60%),
    radial-gradient(900px 700px at 85% 70%, #ffe1f0, transparent 60%),
    linear-gradient(135deg, var(--bg1), var(--bg2));
  overflow:hidden;

  /* —Ñ–æ–Ω —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –ø–∞—É–∑—ã */
  animation: bgIn 1400ms ease-out 600ms both;
}

@keyframes bgIn{
  from{ filter: blur(7px); transform: scale(1.02); }
  to  { filter: blur(0);  transform: scale(1); }
}

/* ====== –ö–ê–†–¢–û–ß–ö–ê ====== */
.card{
  width:min(720px,92vw);
  min-height:min(560px,86vh);

  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;

  padding:60px 28px 50px;

  border-radius:34px;
  background:var(--card);
  box-shadow:var(--shadow);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,.55);

  position:relative;
  text-align:center;

  /* –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–∂–µ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã –∏ –¥–æ–ª—å—à–µ */
  opacity:0;
  transform: translateY(28px) scale(.975);
  animation: cardIn 1100ms cubic-bezier(.2,.9,.2,1) 600ms both;
}

@keyframes cardIn{
  0%{ opacity:0; transform: translateY(28px) scale(.975); }
  60%{ opacity:1; transform: translateY(-6px) scale(1.01); }
  100%{ opacity:1; transform: translateY(0) scale(1); }
}

.card::before{
  content:"";
  position:absolute; inset:14px;
  border-radius:26px;
  border: 2px dashed rgba(255,59,107,.28);
  pointer-events:none;
}

/* ====== –°–ï–†–î–¶–ï (–ø–µ—Ä–≤—ã–º) ====== */
.heart-wrap{
  margin-bottom:20px;

  opacity:0;
  transform: translateY(-10px) scale(.88);
  animation: popIn 700ms cubic-bezier(.2,.9,.2,1) 1300ms both; /* –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ */
}

@keyframes popIn{
  0%{ opacity:0; transform: translateY(-10px) scale(.88); }
  70%{ opacity:1; transform: translateY(0) scale(1.07); }
  100%{ opacity:1; transform: translateY(0) scale(1); }
}

.heart{
  width:150px;
  height:150px;
  background:var(--accent);
  transform:rotate(45deg);
  position:relative;
  border-radius:20px;

  /* –ø—É–ª—å—Å–∞—Ü–∏—è */
  animation:pulse 1.2s infinite;
}

.heart:before,
.heart:after{
  content:"";
  width:150px;
  height:150px;
  background:var(--accent);
  border-radius:50%;
  position:absolute;
}

.heart:before{left:-75px;top:0;}
.heart:after{top:-75px;left:0;}

@keyframes pulse{
  0%,100%{transform:rotate(45deg) scale(1);}
  50%{transform:rotate(45deg) scale(1.06);}
}

/* ====== –¢–ï–ö–°–¢ (–ø–µ—á–∞—Ç–∞–Ω–∏–µ, –≤—Ç–æ—Ä—ã–º) ====== */
h1{
  font-size:clamp(26px,3vw,40px);
  margin:0 0 25px;
  line-height:1.2;

  opacity:0; /* –ø–æ–∫–∞–∂–µ–º –∫–æ–≥–¥–∞ –Ω–∞—á–Ω–µ–º –ø–µ—á–∞—Ç–∞—Ç—å */
}

h1.big{
  font-size:clamp(34px,4.5vw,56px);
}

/* –º–∏–≥–∞—é—â–∏–π –∫—É—Ä—Å–æ—Ä –ø—Ä–∏ –ø–µ—á–∞—Ç–∞–Ω–∏–∏ */
.typing-caret::after{
  content:"";
  display:inline-block;
  width:2px;
  height:1em;
  margin-left:6px;
  background: currentColor;
  transform: translateY(2px);
  animation: caretBlink .75s steps(1) infinite;
}

@keyframes caretBlink{
  50%{ opacity:0; }
}

/* ====== –ö–ù–û–ü–ö–ò (—Ç—Ä–µ—Ç—å–∏–º) ====== */
.buttons{
  display:flex;
  gap:16px;

  opacity:0;
  transform: translateY(10px);
  pointer-events:none;
}

.buttons.show{
  opacity:1;
  transform: translateY(0);
  transition: opacity 650ms ease, transform 650ms ease;
  pointer-events:auto;
}

.btn{
  border:none;
  padding:14px 28px;
  border-radius:18px;
  font-size:18px;
  font-weight:900;
  cursor:pointer;
  box-shadow:0 14px 28px rgba(0,0,0,.12);
  transition:transform .2s, filter .2s;
}

.btn:active{ transform:scale(.96); }

#yes{
  background:var(--yes);
  color:#053c35;
}

#no{
  background:#ff5a7d;
  color:#fff;
  transition:transform .3s cubic-bezier(.2,.8,.2,1);
}

/* ====== –°–û–û–ë–©–ï–ù–ò–ï ====== */
.msg{
  margin-top:20px;
  font-size:30px;
  font-weight:900;
  opacity:0;
  transition:.4s;
}
.msg.show{ opacity:1; }

/* ====== –ö–û–ù–§–ï–¢–¢–ò ====== */
#fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:999;
}
</style>
</head>

<body>
<canvas id="fx"></canvas>

<div class="card">
  <div class="heart-wrap">
    <div class="heart"></div>
  </div>

  <h1 id="title">–ü—Ä–∏–Ω—Ü–µ—Å—Å–∫–∞, —Ç—ã –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</h1>

  <div class="buttons" id="buttons">
    <button class="btn" id="yes">–î–∞</button>
    <button class="btn" id="no">–ù–µ—Ç</button>
  </div>

  <div class="msg" id="msg"></div>
</div>

<script>
/* ===== –ü–ï–ß–ê–¢–ê–ù–ò–ï –¢–ï–ö–°–¢–ê (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–µ—Ä–¥—Ü–∞) ===== */
const titleEl = document.getElementById('title');
const buttons = document.getElementById('buttons');

const fullText = titleEl.textContent;
titleEl.textContent = "";
titleEl.style.opacity = "1";

function typeText(el, text, speed = 45){
  return new Promise((resolve) => {
    let i = 0;
    el.classList.add('typing-caret');

    const timer = setInterval(() => {
      el.textContent += text[i];
      i++;

      if(i >= text.length){
        clearInterval(timer);
        // –Ω–µ–±–æ–ª—å—à–æ–π ‚Äú–¥–æ—á–∏—Ç‚Äù –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –∫–Ω–æ–ø–æ–∫
        setTimeout(() => {
          el.classList.remove('typing-caret');
          resolve();
        }, 350);
      }
    }, speed);
  });
}

// –ü–∞—É–∑–∞ ‚Üí —Å–µ—Ä–¥—Ü–µ —É–∂–µ –ø–æ—è–≤–∏–ª–æ—Å—å –ø–æ CSS ‚Üí –∑–∞—Ç–µ–º –ø–µ—á–∞—Ç–∞–Ω–∏–µ ‚Üí –∑–∞—Ç–µ–º –∫–Ω–æ–ø–∫–∏
(async () => {
  // –¥–æ–∂–¥–µ–º—Å—è –ø–æ–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∞/—Å–µ—Ä–¥—Ü–µ –ø—Ä–æ—è–≤—è—Ç—Å—è (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–∞–π–º–∏–Ω–≥–∞–º–∏ CSS)
  await new Promise(r => setTimeout(r, 1500));
  await typeText(titleEl, fullText, 45);
  buttons.classList.add('show');
})();

/* ===== –£–ë–ï–ì–ê–Æ–©–ê–Ø –ö–ù–û–ü–ö–ê (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ —Å–º—ã—Å–ª—É) ===== */
const noBtn = document.getElementById('no');
const yesBtn = document.getElementById('yes');
const msg = document.getElementById('msg');

let nx=0, ny=0;
function clamp(v,min,max){ return Math.max(min,Math.min(max,v)); }

buttons.addEventListener('mousemove', e=>{
  const rect = noBtn.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;

  const dist = Math.hypot(e.clientX - cx, e.clientY - cy);
  if(dist > 120) return;

  let dx = cx - e.clientX;
  let dy = cy - e.clientY;

  const len = Math.hypot(dx,dy) || 1;
  dx/=len; dy/=len;

  nx += dx * 70;
  ny += dy * 70;

  nx = clamp(nx, -150, 150);
  ny = clamp(ny, -90, 90);

  noBtn.style.transform = `translate(${nx}px,${ny}px)`;
});

noBtn.addEventListener('touchstart', (e) => {
  e.preventDefault();
  const t = e.touches[0];
  const rect = noBtn.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;

  let dx = cx - t.clientX;
  let dy = cy - t.clientY;

  const len = Math.hypot(dx,dy) || 1;
  dx/=len; dy/=len;

  nx += dx * 90;
  ny += dy * 90;

  nx = clamp(nx, -150, 150);
  ny = clamp(ny, -90, 90);

  noBtn.style.transform = `translate(${nx}px,${ny}px)`;
}, { passive:false });

/* ===== –°–ê–õ–Æ–¢ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ –ª–æ–≥–∏–∫–µ) ===== */
const canvas=document.getElementById('fx');
const ctx=canvas.getContext('2d');

let W,H;
let parts=[];
let run=false;

function resize(){
  W=window.innerWidth;
  H=window.innerHeight;
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  canvas.width = Math.floor(W * dpr);
  canvas.height = Math.floor(H * dpr);
  canvas.style.width = W + "px";
  canvas.style.height = H + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
resize();
window.addEventListener('resize',resize);

function spawn(mult=1){
  const count = Math.floor(420 * mult);
  for(let i=0;i<count;i++){
    parts.push({
      x:W/2 + (Math.random()*60-30),
      y:H/3 + (Math.random()*30-15),
      vx:(Math.random()-0.5)*14,
      vy:(Math.random()-1)*14,
      g:.2,
      l:220 + Math.random()*80,
      c:`hsl(${Math.random()*360},95%,60%)`
    });
  }
}

function tick(){
  if(!run) return;

  ctx.clearRect(0,0,W,H);

  for(let i=parts.length-1;i>=0;i--){
    const p = parts[i];

    p.vy += p.g;
    p.x += p.vx;
    p.y += p.vy;
    p.l--;

    const a = Math.max(0, Math.min(1, p.l/140));
    ctx.globalAlpha = a;
    ctx.fillStyle = p.c;
    ctx.fillRect(p.x,p.y,4,4);

    if(p.l<=0 || p.y>H+80) parts.splice(i,1);
  }

  ctx.globalAlpha = 1;

  if(parts.length){
    requestAnimationFrame(tick);
  }else{
    run=false;
  }
}

/* ===== –ö–ù–û–ü–ö–ê –î–ê ===== */
yesBtn.onclick=()=>{
  buttons.style.display="none";

  titleEl.textContent="–£—Ä–∞–∞–∞! üíò –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ—è –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞!";
  titleEl.classList.add('big');

  msg.textContent="ü•∞üíûü•∞";
  msg.classList.add('show');

  spawn(1.0);
  setTimeout(()=>spawn(0.85), 160);

  if(!run){
    run=true;
    tick();
  }
};
</script>

</body>
</html>
